```
        ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïó
        ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë
        ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó   ‚ïö‚ñà‚ñà‚ñà‚ïî‚ïù ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë
        ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù   ‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë
        ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïù ‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë
        ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù

               ‚ñà‚ñà‚ïó     ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïó
               ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïù
               ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ïî‚ïù
               ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó
               ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïî‚ïù ‚ñà‚ñà‚ïó
               ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù
```

# üöÄ Exarch Scripts - Post-Installation Setup for Omarchy Linux

Scripts de configura√ß√£o p√≥s-instala√ß√£o para [**Omarchy Linux**](https://omarchy.org/) - uma distribui√ß√£o moderna baseada em Arch Linux com Hyprland como gerenciador de janelas.

## üìã Pr√©-requisitos

### 1. Instalar Omarchy Linux primeiro!

Este script foi projetado especificamente para rodar **ap√≥s** a instala√ß√£o do Omarchy Linux.

1. **Baixe o ISO do Omarchy**: https://omarchy.org/
2. **Instale o sistema** seguindo as instru√ß√µes da distribui√ß√£o
3. **Reinicie** e fa√ßa login no seu novo sistema Omarchy
4. **Clone este reposit√≥rio** e execute o script

> ‚ö†Ô∏è **IMPORTANTE**: Este script assume que voc√™ j√° tem o Omarchy Linux instalado com:
> - `yay` (gerenciador AUR - padr√£o no Omarchy)
> - `mise` (gerenciador de ambientes - padr√£o no Omarchy)
> - `hyprland` (gerenciador de janelas - padr√£o no Omarchy)

## post-omarchy-setup.sh

Script automatizado com menu interativo para configurar o ambiente ap√≥s uma instala√ß√£o limpa do Omarchy Linux. O script assume que o sistema j√° possui `yay` instalado (padr√£o no Omarchy).

### üé® Menu Interativo Avan√ßado

O script apresenta um menu interativo moderno com navega√ß√£o por teclado:
- **Navega√ß√£o com setas** ‚Üë ‚Üì para mover entre op√ß√µes
- **Barra de espa√ßo** para marcar/desmarcar itens
- **Enter** para confirmar sele√ß√£o
- **Indicador visual** da op√ß√£o selecionada
- Perfis pr√©-configurados (Recomendados, Desenvolvimento Completo)
- Detec√ß√£o autom√°tica de hardware (Dell XPS 13 Plus)
- Visualiza√ß√£o clara do que ser√° instalado antes de confirmar

### Funcionalidades Dispon√≠veis

#### üì¶ Aplica√ß√µes Principais
- **Google Chrome** - Navegador web
- **CopyQ** - Gerenciador de clipboard avan√ßado
- **Dropbox** - Cliente de sincroniza√ß√£o de arquivos
- **AWS VPN Client** - Cliente VPN da AWS (com configura√ß√£o autom√°tica de servi√ßos)
- **Postman** - Ferramenta para teste de APIs

#### üõ†Ô∏è JetBrains IDEs
- **JetBrains Toolbox** - Gerenciador de IDEs JetBrains
- **Rider** - IDE para .NET
- **DataGrip** - IDE para bancos de dados

> **Nota:** Os pacotes s√£o instalados do AUR usando os nomes corretos `rider` e `datagrip`

#### üíª IDEs e Editores de C√≥digo
- **Cursor** - IDE moderna com IA integrada para desenvolvimento

#### üîê Autentica√ß√£o Corporativa
- **Microsoft Entra ID Integration** - Login com contas corporativas Microsoft
- **Multi-factor Authentication (MFA)** - Suporte completo a autentica√ß√£o em dois fatores
- **Himmelblau Authentication Daemon** - Sistema moderno de autentica√ß√£o para Linux

#### üöÄ Ambientes de Desenvolvimento via Mise
- **Node.js**: Vers√£o LTS por padr√£o (com verifica√ß√£o de instala√ß√£o pr√©via)
- **.NET SDK**: 
  - Vers√£o 9 como padr√£o global
  - Vers√£o 8 instalada adicionalmente
  
> **Nota:** O script verifica se os runtimes j√° est√£o instalados antes de tentar reinstal√°-los

#### üìù CLIs via NPM
- **Claude Code** - CLI oficial do Claude da Anthropic

#### üé® Configura√ß√µes do Hyprland
- Sincroniza√ß√£o de dotfiles do Hypr (`~/.config/hypr`)
- Sincroniza√ß√£o de dotfiles do Hyprl (`~/.config/hyprl`)
- Cria backups datados antes de sobrescrever configura√ß√µes existentes
- Usa `rsync` para sincroniza√ß√£o eficiente (com fallback para `cp`)

#### üîê Gerenciamento de Dotfiles
- **Chezmoi** - Gerenciador de dotfiles com suporte a templates e criptografia
- **Age** - Ferramenta de criptografia moderna para arquivos sens√≠veis
- Configura√ß√£o interativa de reposit√≥rio de dotfiles
- Gera√ß√£o autom√°tica de chaves Age para criptografia
- Suporte a m√∫ltiplas op√ß√µes de configura√ß√£o (reposit√≥rio existente, novo reposit√≥rio, sem criptografia)

#### üíª Suporte para Dell XPS 13 Plus (9320)

O script detecta automaticamente o Dell XPS 13 Plus e oferece configura√ß√µes espec√≠ficas:

**Configura√ß√£o da Webcam IPU6:**
- Instala√ß√£o do driver IVSC (via AUR ou compila√ß√£o do fonte)
- Instala√ß√£o dos bin√°rios e HAL da c√¢mera IPU6
- Configura√ß√£o de regras udev
- Configura√ß√£o de m√≥dulos para carregamento autom√°tico
- Verifica√ß√£o de firmware

**Otimiza√ß√µes de Hardware:**
- Instala√ß√£o e configura√ß√£o do `thermald` para gerenciamento t√©rmico
- Instala√ß√£o e configura√ß√£o do TLP para gerenciamento de energia
- Instala√ß√£o do `powertop` para an√°lise de consumo
- Detec√ß√£o e configura√ß√£o de √°udio Tiger Lake

### Uso

```bash
# Execu√ß√£o padr√£o com menu interativo
./post-omarchy-setup.sh

# Modo DEBUG (simula instala√ß√µes sem executar)
./post-omarchy-setup.sh --debug

# Execu√ß√£o sem menu (usa configura√ß√µes padr√£o)
./post-omarchy-setup.sh --no-menu

# Combinar op√ß√µes
./post-omarchy-setup.sh --debug --no-menu

# Com vari√°veis de ambiente customizadas
HYPR_SRC_DIR=/path/to/my/dotfiles/hypr ./post-omarchy-setup.sh
```

### Controles do Menu Interativo

- **‚Üë/‚Üì**: Navegar entre op√ß√µes
- **Espa√ßo**: Marcar/desmarcar item selecionado
- **Enter**: Confirmar sele√ß√£o e prosseguir
- **a**: Marcar/desmarcar todos os itens
- **r**: Aplicar perfil recomendado (essenciais)
- **d**: Aplicar perfil de desenvolvimento completo
- **q**: Sair sem instalar

### Vari√°veis de Configura√ß√£o

O script permite customiza√ß√£o atrav√©s de vari√°veis de ambiente:

```bash
# Vers√µes de runtime
DEFAULT_NODE="lts"              # Vers√£o do Node.js (lts, 22, 20, etc)
DEFAULT_DOTNET_DEFAULT="9"      # Vers√£o padr√£o do .NET
EXTRA_DOTNET=("8")             # Vers√µes adicionais do .NET

# Diret√≥rios de dotfiles
HYPR_SRC_DIR="./dotfiles/hypr"    # Origem dos configs do Hypr
HYPRL_SRC_DIR="./dotfiles/hyprl"  # Origem dos configs do Hyprl
HYPR_DST_DIR="$HOME/.config/hypr"    # Destino Hypr
HYPRL_DST_DIR="$HOME/.config/hyprl"  # Destino Hyprl
```

### Recursos de Seguran√ßa

- **DNS Tempor√°rio**: Configura automaticamente DNS (8.8.8.8, 1.1.1.1) durante a execu√ß√£o e restaura ao final
- **Modo Debug**: Use `--debug` para simular todas as instala√ß√µes sem executar comandos reais
- **Modo fail-safe**: Script usa `set -euo pipefail` para parar em erros
- **Verifica√ß√£o de privil√©gios**: Requer sudo mas n√£o deve ser executado como root
- **Yay sem root**: O script evita usar yay com sudo (usa --sudoloop para solicitar senha quando necess√°rio)
- **Backups autom√°ticos**: Cria backups datados antes de sobrescrever configura√ß√µes
- **Tratamento de erros**: Usa `warn` para falhas n√£o-cr√≠ticas, permitindo continua√ß√£o
- **Logging colorido**: Feedback visual claro do progresso e status

### Estrutura de Logging

- üü¢ `[ OK ]` - Opera√ß√£o conclu√≠da com sucesso
- üîµ `[ .. ]` - Opera√ß√£o em progresso
- üü° `[ !! ]` - Aviso (n√£o-cr√≠tico)
- üî¥ `[ERR]` - Erro cr√≠tico

### Sum√°rio Final

Ao final da execu√ß√£o, o script apresenta um sum√°rio detalhado contendo:
- ‚úì Pacotes instalados com sucesso (com origem: pacman/AUR/npm)
- ‚úì Runtimes configurados via mise
- ‚è© Pacotes/Runtimes j√° instalados (pulados)
- ‚úó Pacotes que falharam na instala√ß√£o
- Diret√≥rios de configura√ß√£o sincronizados

### Dell XPS 13 Plus (9320) - Informa√ß√µes Adicionais

Se voc√™ possui um Dell XPS 13 Plus, o script:

1. **Detecta automaticamente** o hardware durante o menu inicial
2. **Oferece configura√ß√£o espec√≠fica** para webcam IPU6
3. **Aplica otimiza√ß√µes** de energia e desempenho
4. **Configura m√≥dulos** necess√°rios para carregamento autom√°tico

**Ap√≥s a instala√ß√£o da webcam:**
- Pode ser necess√°rio reiniciar o sistema
- Verificar status: `sudo dmesg | grep -i ipu6`
- Listar dispositivos: `v4l2-ctl --list-devices`
- Testar webcam: Use aplicativos como `cheese` ou `guvcview`

**Refer√™ncias:**
- [Arch Wiki - Dell XPS 13 Plus (9320)](https://wiki.archlinux.org/title/Dell_XPS_13_Plus_(9320))

### Pr√©-requisitos

- Omarchy Linux instalado (Arch Linux + Hyprland)
- `yay` instalado (padr√£o no Omarchy)
- `mise` instalado (assumido pelo Omarchy)
- Acesso sudo configurado
- Conex√£o com internet para baixar pacotes

### Notas

- O script √© idempotente - pode ser executado m√∫ltiplas vezes com seguran√ßa
- Dropbox service √© habilitado automaticamente via systemd user service
- AWS VPN Client configura automaticamente systemd-resolved e awsvpnclient.service
- O script continua mesmo se algumas instala√ß√µes falharem (comportamento resiliente)
- O menu interativo facilita a personaliza√ß√£o da instala√ß√£o
- A detec√ß√£o de hardware √© autom√°tica e n√£o-intrusiva

### Gerenciamento de Dotfiles com Chezmoi e Age

O script oferece configura√ß√£o completa para gerenciamento de dotfiles usando **Chezmoi** e **Age**:

#### Chezmoi
- **O que √©**: Gerenciador de dotfiles com suporte a templates, criptografia e m√∫ltiplas m√°quinas
- **Vantagens**: 
  - Templates condicionais baseados em sistema/usu√°rio
  - Suporte nativo a criptografia com Age
  - Sincroniza√ß√£o bidirecional
  - Suporte a m√∫ltiplos reposit√≥rios

#### Age
- **O que √©**: Ferramenta de criptografia moderna, simples e segura
- **Vantagens**:
  - Criptografia baseada em chaves p√∫blicas/privadas
  - Formato compacto e eficiente
  - Integra√ß√£o nativa com Chezmoi
  - Mais simples que GPG

#### Configura√ß√£o Autom√°tica
O script oferece 4 op√ß√µes de configura√ß√£o:
1. **Reposit√≥rio existente**: Conecta a um reposit√≥rio Git j√° existente
2. **Novo reposit√≥rio**: Cria um novo reposit√≥rio local com estrutura b√°sica
3. **Sem criptografia**: Configura apenas Chezmoi (sem Age)
4. **Manual**: Instala as ferramentas mas deixa a configura√ß√£o para depois

#### Comandos √öteis
```bash
# Aplicar dotfiles
chezmoi apply

# Ver diferen√ßas
chezmoi diff

# Editar arquivo espec√≠fico
chezmoi edit ~/.bashrc

# Adicionar novo arquivo
chezmoi add ~/.config/nvim/init.vim

# Criptografar arquivo com Age
age -e -r "age1..." arquivo.txt > arquivo.txt.age

# Descriptografar arquivo
age -d -i ~/.config/age/keys.txt arquivo.txt.age > arquivo.txt
```

#### Documenta√ß√£o
- **Chezmoi**: https://www.chezmoi.io/
- **Age**: https://age-encryption.org/
- **Exemplos**: https://github.com/twpayne/chezmoi/tree/master/docs/examples

## üîê Microsoft Entra ID Authentication Integration

### Complete Corporate Authentication Solution

O Exarch Scripts agora inclui **integra√ß√£o completa com Microsoft Entra ID** (Azure AD), permitindo login direto no Linux com contas corporativas da Microsoft.

#### ‚ú® Recursos
- **üè¢ Login corporativo**: Use `usuario@suaempresa.com` para fazer login
- **üîí Multi-factor Authentication**: MFA autom√°tico via Microsoft Authenticator
- **üîÑ Sincroniza√ß√£o de usu√°rios**: Usu√°rios do Entra ID aparecem automaticamente no sistema
- **üñ•Ô∏è Suporte completo ao Hyprland**: Funciona tanto no terminal quanto na interface gr√°fica
- **‚ö° Instala√ß√£o automatizada**: Script completo com compila√ß√£o e configura√ß√£o

#### üöÄ Como usar

**Instala√ß√£o autom√°tica (recomendado):**
```bash
./install.sh
# Selecione: "Microsoft Entra ID Authentication"
```

**Resultado:**
- Sistema compilado e instalado automaticamente
- PAM e NSS configurados
- Guias interativas para registro de aplica√ß√£o
- Testes de conectividade e autentica√ß√£o
- Login funcionando em 15-20 minutos

#### üìã O que √© instalado
- **Himmelblau**: Daemon de autentica√ß√£o Microsoft para Linux
- **M√≥dulos PAM**: Integra√ß√£o com sistema de autentica√ß√£o
- **M√≥dulos NSS**: Resolu√ß√£o de usu√°rios e grupos
- **Configura√ß√µes**: PAM, NSS e systemd automaticamente configurados

#### üß™ Ap√≥s a instala√ß√£o
```bash
# Testar autentica√ß√£o
himmelblau auth-test --name usuario@suaempresa.com

# Verificar usu√°rio no sistema  
getent passwd usuario@suaempresa.com

# Login no terminal
su - usuario@suaempresa.com

# Login gr√°fico no Hyprland
# Use: usuario@suaempresa.com na tela de login
```

#### üìö Documenta√ß√£o completa
- **[Guia de Setup](docs/entra-id-setup.md)** - Instala√ß√£o e configura√ß√£o detalhada
- **[Cria√ß√£o Manual de App](docs/entra-id-app-creation.md)** - Registro manual no portal Azure
- **[Troubleshooting](docs/entra-id-troubleshooting.md)** - Problemas comuns e solu√ß√µes
- **[Backup e Restore](docs/entra-id-backup-restore.md)** - Procedimentos de seguran√ßa

---

## üîê Configura√ß√£o Autom√°tica: PostgreSQL .pgpass via 1Password

### Funcionalidade

O script oferece integra√ß√£o completa com 1Password CLI para gerar automaticamente arquivos `.pgpass` a partir de credenciais armazenadas no 1Password.

### Configura√ß√£o Personalizada

Crie um arquivo `.env` na pasta do projeto para configurar suas informa√ß√µes:

```bash
# .env
ONEPASSWORD_URL="https://suaempresa.1password.com/"
ONEPASSWORD_EMAIL="seu.email@empresa.com"  # Opcional
```

### Como usar

#### Setup inicial (primeira vez)
```bash
# Script auxiliar para configura√ß√£o guiada
./setup-1password-pgpass.sh
```

#### Gerar .pgpass
```bash
# Modo teste - gera .pgpass_debug
./install.sh --1pass

# Modo produ√ß√£o - via menu interativo
./install.sh
# Selecione: "Configurar ambiente dev (.pgpass via 1Password)"
```

### Recursos

- **Instala√ß√£o autom√°tica** do 1Password CLI e jq
- **Configura√ß√£o interativa** da conta 1Password
- **Login autom√°tico** com detec√ß√£o de conta
- **Busca inteligente** de credenciais com categoria "Database"
- **Menu de sele√ß√£o** para escolher quais credenciais incluir
- **Backup autom√°tico** de .pgpass existente
- **Permiss√µes corretas** (600) aplicadas automaticamente

### Fluxo do processo

1. Verifica/instala depend√™ncias (jq, 1password-cli)
2. Configura conta 1Password se necess√°rio
3. Faz login autom√°tico
4. Busca credenciais de banco de dados
5. Apresenta menu de sele√ß√£o
6. Gera .pgpass com formato correto
7. Aplica permiss√µes de seguran√ßa

### Troubleshooting

**1Password CLI n√£o instala:**
- O AUR pode estar fora do ar
- Instale manualmente: https://1password.com/downloads/command-line/

**Credenciais n√£o aparecem:**
- Certifique-se que t√™m categoria "Database" no 1Password
- Verifique se est√° autenticado: `op vault list`

**Erro de autentica√ß√£o:**
- Execute: `op signin` manualmente
- Ou use: `./setup-1password-pgpass.sh` para configura√ß√£o guiada

## üñ•Ô∏è Configura√ß√£o Autom√°tica: Remmina RDP via 1Password

### Vis√£o Geral

O script oferece integra√ß√£o completa com 1Password CLI para gerar automaticamente conex√µes RDP do Remmina a partir de credenciais de servidores armazenadas no 1Password.

### Configura√ß√£o

Adicione ao seu arquivo `.env`:
```bash
# Remmina Configuration
SETUP_REMMINA_CONNECTIONS=true
ENABLE_REMMINA_MODULE=true

# Vault mappings (opcional)
VAULT_CATEGORIES=(
  ["Cloud Prod"]="prod"
  ["Cloud Dev"]="dev" 
  ["Personal"]="personal"
)
```

### Como usar

#### Modo teste - gera arquivos de exemplo
```bash
./install.sh --remmina
```

#### Modo produ√ß√£o - via menu interativo
```bash
./install.sh
# Selecione: "Gerar conex√µes Remmina RDP via 1Password"
```

### Recursos

- **Instala√ß√£o autom√°tica** do Remmina
- **Busca inteligente** de credenciais de servidores
- **Suporte multil√≠ngue** (portugu√™s + ingl√™s) para nomes de campos
- **Fallbacks m√∫ltiplos** para encontrar hostname, username e password
- **Organiza√ß√£o por grupos** (prod, dev, personal)
- **Modo debug** para troubleshooting
- **Backup autom√°tico** de configura√ß√µes existentes

### Campos Suportados

O script busca automaticamente por:

**Hostname/Server:**
- `server`, `hostname`, `address`, `ip`, `host`
- `Servidor`, `endere√ßo`, `endereco`
- URLs (extrai hostname automaticamente)

**Username:**
- `username`, `user`, `login`, `account`
- `usu√°rio`, `usuario`, `conta`
- Se√ß√£o `.login.username`

**Password:**
- `password`, `pass`, `pwd`, `secret`, `chave`
- `senha`
- Se√ß√£o `.login.password`

### Troubleshooting

**Credenciais n√£o aparecem:**
- Certifique-se que t√™m categoria "Server" ou "Login" no 1Password
- Verifique se est√° autenticado: `op vault list`

**Campos n√£o s√£o encontrados:**
- Ative o modo debug: `DEBUG_REMMINA=true ./install.sh`
- Verifique os nomes dos campos no 1Password

**Erro de autentica√ß√£o:**
- Execute: `op signin` manualmente
- Configure primeiro o 1Password: `./install.sh --1pass`

## üé• Solu√ß√£o Autom√°tica: Pipewire Camera no Chrome/Chromium

### O Problema

Por padr√£o, o Chrome e Chromium no Wayland/Arch Linux n√£o conseguem acessar a webcam atrav√©s do Pipewire, mesmo com as flags de linha de comando configuradas corretamente. As flags ficam como "Default" no `chrome://flags` ao inv√©s de "Enabled".

### Nossa Solu√ß√£o

Este script implementa uma **solu√ß√£o completa e autom√°tica** que:

1. **Configura flags de linha de comando** em `~/.config/chromium-flags.conf` e `~/.config/chrome-flags.conf`:
   ```bash
   --enable-webrtc-pipewire-camera
   --enable-features=WebRTCPipeWireCapturer
   --ozone-platform=wayland
   --enable-wayland-ime
   ```

2. **Modifica arquivos .desktop** para incluir as flags automaticamente quando aberto pelo menu do sistema

3. **üîë INOVA√á√ÉO: For√ßa as flags como "Enabled" internamente** modificando os arquivos de configura√ß√£o do navegador:
   - `~/.config/chromium/Default/Preferences`
   - `~/.config/chromium/Local State`
   - `~/.config/google-chrome/Default/Preferences` 
   - `~/.config/google-chrome/Local State`

   Adicionando o campo `enabled_labs_experiments`:
   ```json
   {
     "browser": {
       "enabled_labs_experiments": [
         "enable-webrtc-pipewire-capturer@1",
         "enable-webrtc-pipewire-camera@1"
       ]
     }
   }
   ```

### Como Funciona

O script `apply_pipewire_camera_patch()` √© executado automaticamente durante a configura√ß√£o e:

1. **Detecta** se h√° navegadores rodando e os fecha temporariamente
2. **Modifica** todos os perfis do Chromium e Chrome existentes
3. **Cria backups** de todos os arquivos modificados
4. **For√ßa** as flags experimentais como "Enabled" nos arquivos internos
5. **Garante** que as flags de linha de comando tamb√©m est√£o presentes

### Resultado

Ap√≥s a execu√ß√£o:
- ‚úÖ A webcam funciona imediatamente no Chrome/Chromium
- ‚úÖ As flags aparecem como "Enabled" em `chrome://flags`
- ‚úÖ Funciona em Google Meet, Discord, Zoom, etc.
- ‚úÖ Configura√ß√£o persistente (sobrevive a updates)
- ‚úÖ Funciona tanto via linha de comando quanto pelo menu do sistema

### Scripts Auxiliares

- `enable-pipewire-camera.sh`: Script standalone para aplicar o patch
- `enable-pipewire-camera.py`: Vers√£o em Python (mais robusta)
- `pipewire-camera-patch.sh`: Fun√ß√£o modular para integra√ß√£o

### Troubleshooting

**Problema com yay:**
- Se receber erro sobre uso de yay como root, o script j√° trata isso automaticamente

**AWS VPN Client n√£o conecta:**
- Verifique se systemd-resolved est√° rodando: `systemctl status systemd-resolved`
- Verifique se o servi√ßo est√° ativo: `systemctl status awsvpnclient`
- Reinicie os servi√ßos se necess√°rio: `sudo systemctl restart systemd-resolved awsvpnclient`

**Webcam n√£o funciona no Dell XPS:**
- Reinicie o sistema ap√≥s a instala√ß√£o
- Verifique se os m√≥dulos foram carregados: `lsmod | grep -E 'intel_vsc|mei_csi|mei_ace'`
- Verifique logs: `journalctl -xe | grep -i ipu6`

**Mise n√£o encontrado:**
- Instale mise manualmente: `curl -fsSL https://mise.jdx.dev/install.sh | sh`
- Adicione ao PATH conforme instru√ß√µes da instala√ß√£o

**Chezmoi/Age n√£o funcionam:**
- Verifique se os pacotes foram instalados: `pacman -Q chezmoi age`
- Para Chezmoi: `chezmoi --version`
- Para Age: `age --version`
- Se n√£o estiverem no PATH, reinicie o terminal ou adicione ao PATH manualmente